@using Habitat.Accounts
@using Habitat.Accounts.Services
@using Sitecore.Mvc
@using Habitat.Accounts.Texts
@using Habitat.Framework.SitecoreExtensions.HtmlHelpers
@using Habitat.Framework.SitecoreExtensions.Repositories
@model Habitat.Accounts.Models.LoginInfo

<div class="main object-non-visible animated object-visible fadeInUpSmall" data-animation-effect="fadeInUpSmall" data-effect-delay="100">
  <div class="form-block center-block p-30 light-gray-bg border-clear">
    <h2 class="title">@Captions.LoginTitle</h2>
    @using (Html.BeginRouteForm(Sitecore.Mvc.Configuration.MvcSettings.SitecoreRouteName, FormMethod.Post, htmlAttributes: new { @class = "form-horizontal", role = "form" }))
    {
      @Html.Sitecore().FormHandler()
      @Html.ValidationSummary(true)
      <div class="form-group has-feedback @Html.ValidationErrorFor(x=>x.Email, "has-error")">
        @Html.LabelFor(x => x.Email, new { @class = "col-sm-3 control-label" })
        <div class="col-sm-8">
          @Html.TextBoxFor(x => x.Email, new { @class = "form-control", id = "loginEmail", @placeholder = "E-mail", required = "true" })
          <i class="fa fa-envelope form-control-feedback"></i>

          @Html.ValidationMessageFor(x => x.Email, "", new { @class = "help-block" })
          @Html.ValidationMessage("invalidCredentials", new { @class = "help-block" })
        </div>
      </div>
      <div class="form-group has-feedback @Html.ValidationErrorFor(x=>x.Password, "has-error")">
        @Html.LabelFor(x => x.Password, new { @class = "col-sm-3 control-label" })
        <div class="col-sm-8">
          @Html.PasswordFor(x => x.Password, new { @class = "form-control", id = "loginPassword", @placeholder = "Password" })
          <i class="fa fa-lock form-control-feedback"></i>

          @Html.ValidationMessageFor(x => x.Password, "", new { @class = "help-block" })
        </div>
      </div>
      <div class="form-group">
        <div class="col-sm-offset-3 col-sm-8">
          <div class="checkbox">
            <label>
              <input type="checkbox" id="loginRemember">@Captions.RememberMe
            </label>
          </div>
          <button type="submit" class="btn btn-group btn-default btn-animated">@Captions.Login <i class="fa fa-user"></i></button>
          <a href="@AccountsSettingsService.Instance.GetPageLink(Sitecore.Context.Item, Templates.AccountsSettings.Fields.ForgotPasswordPage)" class="btn btn-link">@Captions.ForgotYourPassword</a>
        </div>
      </div>
    }
  </div>
  <p class="text-center space-top">
    <a href="@AccountsSettingsService.Instance.GetPageLink(Sitecore.Context.Item, Templates.AccountsSettings.Fields.RegisterPage)" class="btn btn-link">@Captions.LoginRegisterLink</a>
  </p>
</div>